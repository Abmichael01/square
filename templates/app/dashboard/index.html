{% extends 'app/dashboard_layout.html' %}
{% load static %}

{% block dashboard_content %}
                            <div class="dashboard-home-layout">
                                <!-- Left Column: Balance and Card -->
                                <div class="left-column">
                                    <h2>Account Overview</h2>
                                    <p>Manage your account and view your information</p>
                                    
                                    <!-- Balance Card -->
                                    <div class="balance-card">
                                        <div class="balance-header">
                                            <div class="balance-title-section">
                                                <div class="balance-icon">
                                                    <i class="fas fa-wallet"></i>
                                                </div>
                                                <div class="balance-info">
                                                    <h3>Total Balance</h3>
                                                    <p>Available funds</p>
                                                </div>
                                            </div>
                                            <div class="balance-menu">
                                                <i class="fas fa-ellipsis-v"></i>
                                            </div>
                                        </div>
                                        <div class="balance-amount">
                                            <span class="balance-currency">$</span>
                                            <span class="balance-value">{{ user.card_amount|default:"0.00"|floatformat:2 }}</span>
                                        </div>
                                        <div class="balance-footer">
                                            {% if user.card_amount > 1000 %}
                                                <div class="balance-change positive">
                                                    <i class="fas fa-check-circle"></i>
                                                    <span>Balance is healthy</span>
                                                </div>
                                            {% elif user.card_amount > 100 %}
                                                <div class="balance-change neutral">
                                                    <i class="fas fa-info-circle"></i>
                                                    <span>Balance is moderate</span>
                                                </div>
                                            {% else %}
                                                <div class="balance-change low">
                                                    <i class="fas fa-exclamation-triangle"></i>
                                                    <span>Balance is low</span>
                                                </div>
                                            {% endif %}
                                            <div class="balance-date">
                                                Last updated: {{ user.date_joined|date:"M d, Y" }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="cards-grid">
                                        <div style="display:flex; gap:16px; align-items:flex-start;">
                                            {% if user.profile.card_design == 'black' %}
                                                {% include 'partials/card_image_black.html' with profile=user.profile %}
                                            {% else %}
                                                {% include 'partials/card_image.html' with profile=user.profile %}
                                            {% endif %}
                                        </div>
                                        {% if not user.profile.is_activated %}
                                            {% if user.profile.full_name %}
                                                {% if payment_status == 'pending' %}
                                                    <div class="card-action-section">
                                                        <div class="card-status-info">
                                                            <i class="fas fa-hourglass-half"></i>
                                                            <span>Payment is being processed. Please wait for admin approval.</span>
                                                        </div>
                                                        <button class="login-button" style="width:auto; display:inline-block; text-decoration:none; background-color: #6c757d; cursor: not-allowed;" disabled>Payment Pending</button>
                                                    </div>
                                                {% elif payment_status == 'rejected' %}
                                                    <div class="card-action-section">
                                                        <div class="card-status-info error">
                                                            <i class="fas fa-times-circle"></i>
                                                            <span>Your payment was rejected. Please try a different payment method.</span>
                                                        </div>
                                                        <a class="login-button" style="width:auto; display:inline-block; text-decoration:none;" href="{% url 'payment_selection' %}">Try Different Payment</a>
                                                    </div>
                                                {% else %}
                                                    <div class="card-action-section">
                                                        <div class="card-status-info">
                                                            <i class="fas fa-exclamation-circle"></i>
                                                            <span>Your KYC is complete. Please complete payment to activate your card.</span>
                                                        </div>
                                                        <a class="login-button" style="width:auto; display:inline-block; text-decoration:none;" href="{% url 'payment_selection' %}">Complete Payment</a>
                                                    </div>
                                                {% endif %}
                                            {% else %}
                                                <div class="card-action-section">
                                                    <div class="card-status-info">
                                                        <i class="fas fa-info-circle"></i>
                                                        <span>Review your card preview and click the button to activate.</span>
                                                    </div>
                                                    <a class="login-button" style="width:auto; display:inline-block; text-decoration:none;" href="{% url 'activate_card' %}">Activate Card</a>
                                                </div>
                                            {% endif %}
                                        {% endif %}
                                    </div>
                                </div>
                                
                                <!-- Currency Rates Section -->
                                <div class="currency-rates-section">
                                    <h2>Currency Exchange Rates</h2>
                                    <p>Live exchange rates for major currencies</p>
                                    
                                    <div class="currency-rates-container">
                                        <div class="currency-rates-card">
                                            <div class="card-header">
                                                <h3>Exchange Rates</h3>
                                                <div class="last-updated">Updated: <span id="last-updated">Just now</span></div>
                                            </div>
                                            <div class="currency-list">
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡ºðŸ‡¸</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">US Dollar</div>
                                                            <div class="currency-code">USD</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate">1.0000</div>
                                                </div>
                                                
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡ªðŸ‡º</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">Euro</div>
                                                            <div class="currency-code">EUR</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate" id="eur-rate">0.9200</div>
                                                </div>
                                                
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡¬ðŸ‡§</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">British Pound</div>
                                                            <div class="currency-code">GBP</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate" id="gbp-rate">0.7900</div>
                                                </div>
                                                
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡¯ðŸ‡µ</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">Japanese Yen</div>
                                                            <div class="currency-code">JPY</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate" id="jpy-rate">149.50</div>
                                                </div>
                                                
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡¨ðŸ‡¦</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">Canadian Dollar</div>
                                                            <div class="currency-code">CAD</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate" id="cad-rate">1.3600</div>
                                                </div>
                                                
                                                <div class="currency-item">
                                                    <div class="currency-info">
                                                        <div class="currency-flag">ðŸ‡¦ðŸ‡º</div>
                                                        <div class="currency-details">
                                                            <div class="currency-name">Australian Dollar</div>
                                                            <div class="currency-code">AUD</div>
                                                        </div>
                                                    </div>
                                                    <div class="currency-rate" id="aud-rate">1.5200</div>
                                                </div>
                                                                        </div>
                        </div>
                    </div>
                </div>
            </div>
{% endblock %}

